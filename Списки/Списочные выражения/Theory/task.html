<html>
 <head></head>
 <body>
  <h1>Тема урока: списочные выражения</h1> 
  <ol> 
   <li>Списочные выражения</li> 
   <li>Решение задач</li> 
  </ol> 
  <p><strong>Аннотация.</strong>&nbsp;Списочные выражения. Создание списков без явного использования циклов и вызова списочного метода&nbsp;<code>append()</code>.</p> 
  <h2 style="text-align: center;">Создание списков</h2> 
  <p>Для того, чтобы создать список состоящий из $10$ нулей мы можем использовать следующий код:</p> 
  <pre><code class="language-python">zeros = []
for i in range(10):
    zeros.append(0)</code></pre> 
  <p>В Python, однако есть более простой и компактный способ для создания такого списка. Мы можем использовать оператор умножения списка на число:</p> 
  <pre><code class="language-python">zeros = [0] * 10</code></pre> 
  <p>Для создания списков, заполненных по более сложным правилам нам приходится явно использовать цикл <code>for</code>.</p> 
  <p>Например, для создания списка целых чисел от $0$ до $9$, мы вынуждены писать такой код:</p> 
  <pre><code class="language-python">numbers = []
for i in range(10):
    numbers.append(i)</code></pre> 
  <p>Такой код хоть и не является сложным, однако достаточно громоздок.</p> 
  <h2 style="text-align: center;">Списочные выражения</h2> 
  <p>В Python есть механизм для создания списков из&nbsp;неповторяющихся элементов. Такой механизм называется&nbsp;— <strong>списочное выражение</strong> (list comprehension).</p> 
  <p>Предыдущий код можно записать следующим образом:</p> 
  <pre><code class="language-python">numbers = [i for i in range(10)]</code></pre> 
  <p>Общий вид списочного выражения следующий:</p> 
  <p style="text-align: center;"><code>[выражение for переменная in последовательность]</code></p> 
  <p>где&nbsp;<code>переменная</code>&nbsp;— имя&nbsp;некоторой переменной,&nbsp;<code>последовательность</code>&nbsp;— последовательность значений, которые она принимает (список, строка или объект, полученный при помощи функции&nbsp;<code>range</code>),&nbsp;<code>выражение</code>&nbsp;— некоторое выражение, как правило, зависящее от использованной в списочном выражении&nbsp;переменной, которым будут заполнены элементы списка.</p> 
  <h3 style="text-align: center;"><strong>Примеры использования списочных выражений</strong></h3> 
  <p><strong>1. Создать список, заполненный&nbsp;10 нулями&nbsp;можно и при помощи списочного выражения:</strong></p> 
  <pre><code class="language-python">zeros = [0 for i in range(10)]</code></pre> 
  <p><strong>2. Создать список, заполненный квадратами целых чисел от 0 до 9 можно так:</strong></p> 
  <pre><code>squares = [i ** 2 for i in range(10)]</code></pre> 
  <p><strong>3. Создать список, заполненный кубами целых чисел от 10 до 20 можно так:</strong></p> 
  <pre><code class="language-python">cubes = [i ** 3 for i in range(10, 21)]</code></pre> 
  <p><strong>4. Создать список,&nbsp;заполненный символами&nbsp;строки:</strong></p> 
  <pre><code class="language-python">chars = [c for c in 'abcdefg']
print(chars)</code></pre> 
  <h3 style="text-align: center;">Считывание входных данных</h3> 
  <p>При решении многих задач из предыдущих уроков мы считывали начальные данные (строки, числа) и заполняли ими список. С помощью списочных выражений&nbsp;процесс заполнения списка можно заметно сократить.</p> 
  <p>Например, если сначала вводится число <code>n</code>&nbsp;–&nbsp;количество строк, а затем сами строки, то создать список можно так:</p> 
  <pre><code class="language-python">n = int(input())
lines = [input() for _ in range(n)]</code></pre> 
  <p>Можно&nbsp;опустить описание переменной <code>n</code>:</p> 
  <pre><code class="language-python">lines = [input() for _ in range(int(input()))]</code></pre> 
  <p>Если требуется считать список чисел, то необходимо добавить преобразование типов:</p> 
  <pre><code class="language-python">numbers = [int(input()) for _ in range(int(input()))]</code></pre> 
  <p>Обратите внимание,&nbsp;мы используем символ <code>_</code> в качестве имени переменной цикла, поскольку она не используется.</p> 
  <p><img alt="" height="48" src="https://ucarecdn.com/855febd0-00e7-48fa-92dc-e2412a458494/" style="float: left;" width="44">Списочные выражения часто используются для&nbsp;инициализации списков. В&nbsp;Python не&nbsp;принято создавать пустые списки, а затем заполнять их&nbsp;значениями, если можно этого избежать.</p> 
  <h3 style="text-align: center;">Условия в списочном выражении</h3> 
  <p>В списочных&nbsp;выражениях можно использовать&nbsp;условный оператор. Например, если требуется создать список четных чисел от 0&nbsp;до 20, то мы можем написать такой код:</p> 
  <pre><code class="language-python">evens = [i for i in range(21) if i % 2 == 0]</code></pre> 
  <p><img alt="" height="48" src="https://ucarecdn.com/855febd0-00e7-48fa-92dc-e2412a458494/" style="float: left;" width="44"><span style="color: #a03881;"><strong>Важно:</strong></span> для того, чтобы получить список, состоящий из четных&nbsp;чисел, лучше использовать функцию <code>range(0, 21, 2)</code>. Предыдущий пример приведен для демонстрации возможности использования условий в списочных выражениях.</p> 
  <h3 style="text-align: center;">Вложенные циклы</h3> 
  <p>В&nbsp;списочном выражении можно использовать вложенные циклы.</p> 
  <p>Следующий программный код:</p> 
  <pre><code class="language-python">numbers = [i * j for i in range(1, 5) for j in range(2)]
print(numbers)</code></pre> 
  <p>выведет список:</p> 
  <pre><code class="language-python">[0, 1, 0, 2, 0, 3, 0, 4]</code></pre> 
  <p>Такой код равнозначен следующему:</p> 
  <pre><code class="language-python">numbers = []

for i in range(1, 5):
    for j in range(2):
        numbers.append(i * j)
print(numbers)</code></pre> 
  <h3 style="text-align: center;">Подводя итог</h3> 
  <p>Пусть&nbsp;<code>word = 'Hello', numbers&nbsp;= [1, 14, 5, 9, 12], words&nbsp;= ['one', 'two', 'three', 'four', 'five', 'six']</code>.</p> 
  <table align="center" border="1" cellpadding="1" cellspacing="1" style="width: 700px;"> 
   <thead> 
    <tr> 
     <th>Списочное выражение</th> 
     <th>Результирующий список</th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr> 
     <td><code>[0 for i in range(10)]</code></td> 
     <td><code>[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]</code></td> 
    </tr> 
    <tr> 
     <td><code>[i ** 2 for i in range(1, 8)]</code></td> 
     <td><code>[1, 4, 9, 16, 25, 36, 49]</code></td> 
    </tr> 
    <tr> 
     <td><code>[i * 10 for i in numbers]</code></td> 
     <td><code>[10, 140, 50, 90, 120]</code></td> 
    </tr> 
    <tr> 
     <td><code>[c * 2 for c in word]</code></td> 
     <td><code>['HH', 'ee', 'll', 'll', 'oo']</code></td> 
    </tr> 
    <tr> 
     <td><code>[m[0] for m in words]</code></td> 
     <td><code>['o', 't', 't', 'f', 'f', 's']</code></td> 
    </tr> 
    <tr> 
     <td><code>[i for i in numbers if i &lt; 10]</code></td> 
     <td><code>[1, 5, 9]</code></td> 
    </tr> 
    <tr> 
     <td><code>[m[0] for m in words if len(m) == 3]</code></td> 
     <td><code>['o', 't', 's']</code></td> 
    </tr> 
   </tbody> 
  </table>
 </body>
</html>